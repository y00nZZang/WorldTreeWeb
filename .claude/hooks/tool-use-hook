#!/bin/bash

# This hook runs before tool execution
# It can be used to prevent dangerous operations

# Prevent accidental force push to main
if [[ "$TOOL_NAME" == "Bash" ]] && echo "$TOOL_INPUT" | grep -q "git push.*--force.*main"; then
  echo "ðŸš« Blocked: Force push to main branch is not allowed"
  exit 1
fi

# Prevent accidental terraform destroy in production
if [[ "$TOOL_NAME" == "Bash" ]] && echo "$TOOL_INPUT" | grep -q "terraform destroy" && echo "$TOOL_INPUT" | grep -q "production"; then
  echo "ðŸš« Blocked: Terraform destroy on production requires explicit confirmation"
  exit 1
fi

exit 0
